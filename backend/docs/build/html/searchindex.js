Search.setIndex({"docnames": ["api/api", "api/db", "api/db_updates", "api/external_api", "api/fastapi", "api/settings", "api/utils", "containers/currency_api", "containers/currency_updater", "containers/database", "containers/react_frontend", "containers/redis", "docker_containers", "external_api", "index", "settings_config", "testing"], "filenames": ["api\\api.rst", "api\\db.rst", "api\\db_updates.rst", "api\\external_api.rst", "api\\fastapi.rst", "api\\settings.rst", "api\\utils.rst", "containers\\currency_api.rst", "containers\\currency_updater.rst", "containers\\database.rst", "containers\\react_frontend.rst", "containers\\redis.rst", "docker_containers.rst", "external_api.rst", "index.rst", "settings_config.rst", "testing.rst"], "titles": ["API Reference", "MySQL Database", "DB Updates", "External API", "FastAPI", "Settings", "Utilities", "Currency API Server", "Update Server", "MySQL Database Server", "React Frontend", "Redis Server", "Docker Containers", "External Source API", "Welcome to Currency API (FastAPI)\u2019s documentation!", "Settings Configuration", "Testing"], "terms": {"mysql": [0, 5, 8, 11, 12, 13, 14, 15, 16], "databas": [0, 2, 4, 5, 8, 11, 12, 13, 14, 15, 16], "sqlalchemi": [0, 14], "orm": [0, 14], "model": [0, 14], "currenc": [0, 2, 3, 5, 8, 10, 11, 12, 13, 15, 16], "currencyupdated": [0, 14], "currencyupd": [0, 14], "user": [0, 4, 5, 10, 14, 15], "interfac": [0, 4, 14], "us": [0, 2, 3, 4, 7, 8, 9, 12, 14, 15, 16], "engin": [0, 14, 16], "session": [0, 14, 16], "get_engin": [0, 14], "create_al": [0, 14], "get_async_sess": [0, 14], "get_db": [0, 14], "util": [0, 14, 16], "wait_for_db": [0, 14], "db": [0, 1, 4, 5, 14, 16], "updat": [0, 1, 5, 9, 12, 13, 14, 15, 16], "fastapi": [0, 7], "main": [0, 2, 14], "add_default_us": [0, 14], "redis_cach": [0, 14], "depend": [0, 3, 14], "extern": [0, 1, 2, 8, 9, 14], "externalapibas": [0, 14], "exchangerateapi": [0, 14], "currencyratesdownload": [0, 14], "set": [0, 1, 2, 4, 8, 14, 16], "logger": [0, 14], "class": [1, 3, 4, 5], "kwarg": 1, "base": [1, 3, 5], "code": 1, "id": 1, "auto": 1, "increment": [1, 3], "uniqu": 1, "currency_update_d": 1, "relat": [1, 4, 15], "object": [1, 3, 4, 5], "currency_upd": 1, "date": 1, "which": [1, 15], "rate": [1, 2, 3, 8, 13], "wa": 1, "save": [1, 9], "along": 1, "creat": [1, 15], "base_currency_id": 1, "foreign": 1, "kei": [1, 3, 4], "base_curr": 1, "currency_id": 1, "date_updated_id": 1, "date_upd": 1, "implement": [1, 3, 4, 11, 12, 14, 15, 16], "authent": [1, 4, 15], "usernam": [1, 5], "email": [1, 5], "full_nam": [1, 5], "full": [1, 5], "name": [1, 5, 6, 15, 16], "i": [1, 2, 3, 4, 7, 8, 9, 11, 12, 15, 16], "disabl": [1, 5], "allow": 1, "login": [1, 10], "password": [1, 5, 15], "hash": 1, "currency_db": 1, "currencydb": [1, 4], "paramet": [1, 2, 3, 4, 5, 6], "requir": [1, 2, 3, 4, 5, 15], "async": [1, 2, 4, 14], "add_upd": 1, "str": [1, 3, 4, 5, 6], "dict": [1, 3, 5], "float": 1, "for_dat": 1, "option": [1, 3, 5], "none": [1, 2, 3, 4, 5], "add": [1, 3], "dictionari": [1, 3], "currency_cod": [1, 3], "pair": [1, 3, 4, 5], "particular": 1, "record": 1, "against": 1, "d": [1, 16], "m": [1, 2, 16], "y": [1, 16], "format": [1, 3], "particularli": 1, "test": [1, 14], "If": [1, 2], "provid": [1, 2, 5, 15], "current": 1, "rais": 1, "valueerror": 1, "return": [1, 2, 3, 4, 5, 6], "add_us": 1, "bool": [1, 5], "fals": [1, 5], "ad": 1, "true": 1, "found": 1, "convert_r": 1, "from_curr_cod": 1, "to_curr_cod": 1, "amount": 1, "on_dat": 1, "ani": [1, 3, 4, 5, 8], "convert": [1, 10, 16], "from": [1, 2, 3, 4, 5, 8, 9, 13, 15, 16], "one": [1, 7, 15], "anoth": 1, "given": 1, "last": 1, "thi": [1, 3, 4, 8, 9, 10, 11, 15], "propog": 1, "except": 1, "stack": 1, "api": [1, 2, 4, 5, 8, 9, 11, 12, 15, 16], "get_curr": 1, "curr_cod": 1, "get": [1, 3, 4, 5, 6, 16], "error": [1, 4], "doe": 1, "exist": 1, "get_currency_cod": 1, "list": 1, "all": [1, 11, 12], "avail": [1, 15], "get_currency_r": 1, "an": [1, 3, 15], "empti": 1, "result": 1, "queri": [1, 4, 11, 16], "created_d": 1, "els": 1, "get_or_cr": 1, "get_pwd_hash": 1, "plain": 1, "text": 1, "get_rate_on_d": 1, "get_us": 1, "properti": [1, 3, 5], "last_update_d": 1, "correspond": 1, "conn_set": 1, "asyncengin": 1, "initi": [1, 3, 16], "": [1, 15, 16], "declarative_bas": 1, "method": 1, "t": 1, "type": 1, "instanc": [1, 3, 6], "interact": [1, 4], "fashion": 1, "sleep": 1, "int": [1, 2, 3, 5], "5": [1, 3, 16], "extra_sleep": 1, "0": [1, 16], "attempt": [1, 3], "connect": [1, 5, 11, 16], "indefinit": 1, "case": 1, "yet": 1, "up": [1, 4], "while": 1, "displai": 1, "reason": 1, "delai": 1, "contain": [1, 3, 7, 8, 9, 10, 11, 14, 16], "valu": [1, 2, 3, 4, 5], "default": [1, 3, 4, 10, 15], "number": [1, 3, 4], "second": [1, 2, 3, 4], "between": 1, "reconnect": 1, "extra": 1, "after": [1, 4], "success": 1, "period": 2, "latest": [2, 3, 8, 9, 13], "sourc": [2, 3, 5, 9, 14], "start_upd": 2, "execut": [2, 16], "freq_min": 2, "interv": [2, 9], "minut": 2, "schedul": 2, "entri": [2, 4], "point": [2, 4], "The": [2, 4, 8, 10, 11, 12, 13, 16], "can": 2, "command": 2, "line": 2, "switch": 2, "updater__frequ": [2, 8, 15], "env": [2, 4, 5, 8, 15, 16], "file": [2, 4, 5, 8, 15], "via": 2, "pydant": [2, 15], "modul": [2, 5, 14, 15, 16], "ext_api": [3, 16], "ext_api_interfac": 3, "abc": 3, "abstract": 3, "formatted_r": 3, "raw_rat": 3, "union": [3, 5], "string": [3, 5], "param": 3, "url": 3, "exchange_r": 3, "access": 3, "exchang": [3, 13], "rates_download": 3, "max_retri": 3, "time_out": 3, "increment_timeout": 3, "gener": [3, 5], "download": 3, "accept": 3, "retri": 3, "retriev": [3, 5, 8, 9, 13], "upon": [3, 4, 16], "failur": 3, "configur": [3, 14], "maximum": 3, "retrial": 3, "time": [3, 15], "out": 3, "each": 3, "occur": 3, "subsequ": 3, "add_head": 3, "header": 3, "addit": 3, "befor": [3, 4, 16], "send": 3, "request": [3, 4], "get_rat": 3, "api_main": [4, 16], "server": [4, 12, 13, 14, 15, 16], "wait": [4, 16], "startup": [4, 5, 15, 16], "start": [4, 7, 15, 16], "itself": 4, "ceat": 4, "call_next": 4, "respons": [4, 7, 8, 9, 11], "redi": [4, 5, 12, 14], "middlewar": [4, 11], "cach": [4, 11, 16], "redis__expire_second": 4, "expiri": 4, "onc": 4, "ar": [4, 9, 10, 13, 15, 16], "pass": [4, 16], "delet": 4, "forc": 4, "fresh": 4, "next": 4, "same": 4, "endpoint": [4, 7], "path": 4, "appli": 4, "select": 4, "onli": [4, 15], "have": 4, "api__prefix": 4, "present": 4, "them": [4, 8], "avoid": [4, 11], "other": [4, 5], "combin": 4, "callabl": 4, "callback": 4, "currency_api": [4, 16], "get_currency_db": 4, "asyncgener": 4, "inject": 4, "function": [4, 6, 12], "py": [4, 16], "obj": 4, "request_url": 4, "currencyapi": 5, "currencyapistartup": 5, "auth": 5, "currencyapiauth": 5, "currencyapius": 5, "prefix": [5, 15], "basemodel": 5, "sett": 5, "secret_kei": 5, "algorithm": 5, "token_expire_minut": 5, "port": [5, 15], "uvicorn_entri": 5, "uvicorn_reload": 5, "com": 5, "pass123": [5, 10], "dialect": 5, "host": 5, "expire_second": 5, "_env_fil": 5, "pathlik": 5, "_env_file_encod": 5, "_env_nested_delimit": 5, "_secrets_dir": 5, "baseset": 5, "auth_set": 5, "db_conn_set": 5, "setting_nam": 5, "db_conn_str": 5, "frequenc": [5, 8], "get_conn_str": 5, "db_set": 5, "construct": 5, "import": 5, "get_logg": 6, "log": 6, "write": [6, 16], "stdout": 6, "show": 6, "output": 6, "when": [7, 8, 9, 15], "system": [7, 8, 9, 12], "deploi": [7, 8, 9], "docker": [7, 8, 9, 14, 16], "compos": [7, 8, 9], "serv": 7, "perpetu": [8, 9], "run": [8, 9, 11, 16], "differ": [8, 12], "confifgur": 8, "call": 8, "receiv": [8, 9], "histor": 8, "data": 8, "These": 9, "regular": 9, "expos": 10, "web": 10, "gui": 10, "credenti": 10, "overhead": 11, "servic": [11, 15], "its": 11, "need": 11, "architect": 12, "five": 12, "work": 12, "collabor": 12, "over": 12, "react": [12, 14], "frontend": [12, 14], "prepetu": 13, "retiev": 13, "basic": 14, "convers": 14, "refer": 14, "index": 14, "search": 14, "page": 14, "applic": 15, "defin": 15, "python": [15, 16], "read": 15, "root": [15, 16], "directori": 15, "exampl": [15, 16], "templat": 15, "should": 15, "copi": [15, 16], "product": 15, "environ": 15, "There": 15, "3": [15, 16], "group": 15, "respect": 15, "mysql__": 15, "like": 15, "etc": 15, "updater__": 15, "api__": 15, "currrenc": 15, "api__startup__": 15, "api__auth__": 15, "cryptographi": 15, "api__user__": 15, "detail": 15, "first": 15, "pytest": 16, "live": 16, "A": 16, "insid": 16, "v": 16, "platform": 16, "win32": 16, "9": 16, "7": 16, "1": 16, "2": 16, "pluggi": 16, "c": 16, "python_venv": 16, "poetri": 16, "virtualenv": 16, "crvacmol": 16, "py3": 16, "script": 16, "ex": 16, "cachedir": 16, "pytest_cach": 16, "rootdir": 16, "develop": 16, "plugin": 16, "anyio": 16, "6": 16, "asyncio": 16, "19": 16, "cov": 16, "12": 16, "typeguard": 16, "13": 16, "mode": 16, "strict": 16, "collect": 16, "item": 16, "test_api": 16, "test_api_currencies_list": 16, "02": 16, "jan": 16, "2023": 16, "04": 16, "37": 16, "14pm": 16, "info": 16, "fail": 16, "consol": 16, "stderr": 16, "handl": 16, "invalid": 16, "build": 16, "4": 16, "22": 16, "finish": 16, "intern": 16, "load": 16, "definit": 16, "dockerfil": 16, "transfer": 16, "26kb": 16, "dockerignor": 16, "context": 16, "34b": 16, "metadata": 16, "io": 16, "librari": 16, "16": 16, "slim": 16, "17": 16, "sha256": 16, "9e0b4391fc41bc35c16caef4740736b6b349f6626fd14eba32793ae3c7b01908": 16, "resolv": 16, "210": 16, "40kb": 16, "apt": 16, "instal": 16, "curl": 16, "ssl": 16, "http": 16, "org": 16, "poetry_hom": 16, "opt": 16, "poetry_vers": 16, "groupadd": 16, "r": 16, "appgrp": 16, "useradd": 16, "appusr": 16, "usermod": 16, "g": 16, "workdir": 16, "app": 16, "8": 16, "chown": 16, "pyproject": 16, "toml": 16, "lock": 16, "10": 16, "dev": 16, "11": 16, "14": 16, "15": 16, "export": 16, "imag": 16, "layer": 16, "061c8bd329befc32240d8873262cb9205cfedcd5bc0a4094bf109c2c4164eef5": 16, "test_currency_api": 16, "24pm": 16, "detach": 16, "2013": 16, "lost": 16, "dure": 16, "29pm": 16, "34pm": 16, "40pm": 16, "open": 16, "test_api_currencies_r": 16, "test_latest_rate_for_currency_success": 16, "test_currency_non_exist": 16, "passed02": 16, "51pm": 16, "complet": 16, "close": 16, "test_db": 16, "test_currency_cod": 16, "test_last_upd": 16, "test_all_latest_rates_correct": 16, "test_latest_rate_correct": 16, "test_latest_rate_curr_non_exist": 16, "test_rate_on_date_correct": 16, "test_add_update_wrong_date_except": 16, "test_get_rate_on_date_wrong_date_except": 16, "test_currency_convers": 16, "57pm": 16, "remov": 16, "38": 16, "02pm": 16, "48": 16}, "objects": {"api_main": [[4, 0, 1, "", "add_default_user"], [4, 0, 1, "", "main"], [4, 0, 1, "", "redis_cache"]], "currency_api.dependencies": [[4, 1, 0, "-", "db"]], "currency_api.dependencies.db": [[4, 0, 1, "", "get_currency_db"]], "currency_api": [[4, 1, 0, "-", "utils"]], "currency_api.utils": [[4, 0, 1, "", "request_url"]], "db.currency_db": [[1, 2, 1, "", "CurrencyDB"]], "db.currency_db.CurrencyDB": [[1, 3, 1, "", "add_update"], [1, 3, 1, "", "add_user"], [1, 3, 1, "", "convert_rate"], [1, 3, 1, "", "get_currency"], [1, 3, 1, "", "get_currency_codes"], [1, 3, 1, "", "get_currency_rates"], [1, 3, 1, "", "get_or_create"], [1, 3, 1, "", "get_pwd_hash"], [1, 3, 1, "", "get_rate_on_date"], [1, 3, 1, "", "get_user"], [1, 4, 1, "", "last_update_date"]], "db.database": [[1, 0, 1, "", "create_all"], [1, 0, 1, "", "get_async_session"], [1, 0, 1, "", "get_db"], [1, 0, 1, "", "get_engine"]], "db.models": [[1, 2, 1, "", "Currencies"], [1, 2, 1, "", "CurrencyUpdateDates"], [1, 2, 1, "", "CurrencyUpdates"], [1, 2, 1, "", "User"]], "db.utils": [[1, 0, 1, "", "wait_for_db"]], "ext_api.exchange_rate": [[3, 2, 1, "", "ExchangeRateAPI"]], "ext_api.exchange_rate.ExchangeRateAPI": [[3, 3, 1, "", "formatted_rates"], [3, 4, 1, "", "params"], [3, 4, 1, "", "url"]], "ext_api.ext_api_interface": [[3, 2, 1, "", "ExternalAPIBase"]], "ext_api.ext_api_interface.ExternalAPIBase": [[3, 3, 1, "", "formatted_rates"], [3, 4, 1, "", "params"], [3, 4, 1, "", "url"]], "ext_api.rates_downloader": [[3, 2, 1, "", "CurrencyRatesDownloader"]], "ext_api.rates_downloader.CurrencyRatesDownloader": [[3, 3, 1, "", "add_headers"], [3, 3, 1, "", "get_rates"]], "": [[5, 1, 0, "-", "settings"], [2, 1, 0, "-", "start_updates"]], "settings": [[5, 2, 1, "", "CurrencyAPI"], [5, 2, 1, "", "CurrencyAPIAuth"], [5, 2, 1, "", "CurrencyAPIStartup"], [5, 2, 1, "", "CurrencyAPIUser"], [5, 2, 1, "", "MYSQL"], [5, 2, 1, "", "REDIS"], [5, 2, 1, "", "Settings"], [5, 2, 1, "", "Updater"], [5, 0, 1, "", "get_conn_string"], [5, 0, 1, "", "settings"]], "settings.Settings": [[5, 4, 1, "", "auth_settings"], [5, 4, 1, "", "db_conn_settings"], [5, 4, 1, "", "db_conn_str"]], "start_updates": [[2, 0, 1, "", "execute"], [2, 0, 1, "", "main"]], "utils": [[6, 1, 0, "-", "logger"]], "utils.logger": [[6, 0, 1, "", "get_logger"]]}, "objtypes": {"0": "py:function", "1": "py:module", "2": "py:class", "3": "py:method", "4": "py:property"}, "objnames": {"0": ["py", "function", "Python function"], "1": ["py", "module", "Python module"], "2": ["py", "class", "Python class"], "3": ["py", "method", "Python method"], "4": ["py", "property", "Python property"]}, "titleterms": {"api": [0, 3, 7, 13, 14], "refer": 0, "mysql": [1, 9], "databas": [1, 9], "sqlalchemi": 1, "orm": 1, "model": 1, "currenc": [1, 7, 14], "currencyupdated": 1, "currencyupd": 1, "user": 1, "interfac": 1, "us": 1, "engin": 1, "session": 1, "get_engin": 1, "create_al": 1, "get_async_sess": 1, "get_db": 1, "util": [1, 4, 6], "wait_for_db": 1, "db": 2, "updat": [2, 8], "extern": [3, 13], "externalapibas": 3, "exchangerateapi": 3, "currencyratesdownload": 3, "fastapi": [4, 14], "main": 4, "add_default_us": 4, "redis_cach": 4, "depend": 4, "set": [5, 15], "logger": 6, "server": [7, 8, 9, 11], "react": 10, "frontend": 10, "redi": 11, "docker": 12, "contain": 12, "sourc": 13, "welcom": 14, "": 14, "document": 14, "indic": 14, "tabl": 14, "configur": 15, "test": 16}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})
